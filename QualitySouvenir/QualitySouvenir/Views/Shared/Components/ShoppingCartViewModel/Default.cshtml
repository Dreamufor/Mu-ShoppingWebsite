@model QualitySouvenir.Models.ShoppingCartViewModels.ShoppingCartViewModel


@{
    ViewData["Title"] = "Default";
}

<a class="nav-link dropdown-toggle" id="navbarDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fas fa-shopping-cart mr-2"> </i>Shopping Cart</a>


<div class="dropdown-menu">
    <h5 class="bg-light pt-2 pb-2 text-dark text-center">My Shopping List</h5>
    <br />
    <div class="container" style="width:650px;height:auto;">
        <table class="table ml-2 mr-2 table-sm">
            <thead>
                <tr>
                    <th scope="col">Image</th>
                    <th scope="col">Souvenir</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Price</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.CartItems)
                {
                    var imgUrl = @Href(item.Souvenir.Image);
                    var errImg = @Href("/images/main/showcase.jpg");
                    var unitPrice = (@item.Souvenir.Price) * (@item.Quantity);
                    <tr>
                        <th scope="row">
                            <img class="card-img-top" style="width: 30px; height: auto;" src="@imgUrl" alt="Souvenir Image" onerror="this.onerror = null; this.src = '@errImg'">
                        </th>
                        <td><a asp-action="Details" asp-route-id="@item.Souvenir.ID" class="alert-link alert-light">@item.Souvenir.Name</a></td>
                        <td>
                            <a asp-action="RemoveFromCart" asp-controller="ShoppingCart" asp-route-id="@item.Souvenir.ID" class="alert-link alert-light"><i class="fas fa-minus mr-1"></i></a>
                            @item.Quantity
                            <a asp-action="AddItemsToCart" asp-controller="ShoppingCart" asp-route-id="@item.Souvenir.ID" class="alert-link alert-light"><i class="fas fa-plus ml-1"></i></a>
                        </td>
                        <td>NZD$ @unitPrice</td>
                    </tr>
                }
            </tbody>
        </table>
        <div class="float-right">
            <table class="table table-borderless table-sm">
                <tbody>
                    <tr>
                        <th scope="row">SubTotal:</th>
                        <td>NZD$ @Model.SubTotal</td>
                    </tr>
                    <tr>
                        <th scope="row">GST(15%):</th>
                        <td>NZD$ @Model.GST</td>
                    </tr>
                    <tr>
                        <th scope="row">GrandTotal:</th>
                        <td>NZD$ @Model.CartTotal</td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            @if (@Model.CartItems.Count > 0)
                            {
                                <a class="btn btn-outline-danger mr-4" asp-action="ClearCart" asp-controller="ShoppingCart">Clear Cart  <i class="fas fa-trash-alt"></i></a>
                                <a class="btn btn-outline-info" asp-action="Delete" asp-controller="Orders">Check Out  <i class="fas fa-step-forward"></i></a>

                            }
                        </td>
                    </tr>
                </tbody>
            </table>

        </div>        
    </div>

</div>

    @section Scripts {
        @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    }
